{"ast":null,"code":"var _jsxFileName = \"/Users/sph/Downloads/StadStrandReactFrontEnd/src/AppContainer/User/BrandPageFeedback.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport UserNavbar from \"../../AppComponents/UserComp/UserNavbar\";\nimport { MDBContainer, MDBIcon, MDBBtn, MDBAlert } from \"mdbreact\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport UserStyles from \"../../AppStyles/UserStyles.module.css\";\nimport Axios from \"axios\";\nimport ReactStars from \"react-rating-stars-component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function BrandPageFeedback(props) {\n  _s();\n\n  const brandPageId = props.match.params.brandpageid;\n  const history = useHistory();\n  const clientId = localStorage.getItem(\"clientId\");\n  const [feedbackQuestions, setFeedbackQuestion] = useState([]);\n  const [feedbackFormData, setFeedbackFormData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [loader, setLoader] = useState(false);\n  const [rating, setRating] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [alertError, setAlertError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [alertSuccess, setAlertSuccess] = useState(false);\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  const imageFileStyle = {\n    padding: \"10px\",\n    border: \"1px dotted #CCCCCC\",\n    marginLeft: \"12px\",\n    width: \"90%\",\n    borderRadius: \"10px\",\n    textAlign: \"center\",\n    fontSize: \"12px\"\n  };\n\n  const redirect = brandPageId => {\n    window.location = `/user/form/${brandPageId}`;\n  };\n\n  const ratingChanged = newRating => {\n    if (newRating === 1) {\n      setRating(\"Very Bad\");\n    } else if (newRating === 2) {\n      setRating(\"Poor\");\n    } else if (newRating === 3) {\n      setRating(\"Ok\");\n    } else if (newRating === 4) {\n      setRating(\"Good\");\n    } else {\n      setRating(\"Excellent\");\n    }\n  };\n\n  useEffect(() => {\n    Axios.get(`https://stadtstrandapi.ecrapps.website/api/v1/brandpagefeedback/${brandPageId}`).then(response => {\n      setFeedbackQuestion(response.data.data.Feedbacks);\n      setLoading(false);\n    }).catch(e => {});\n  }, [brandPageId]);\n\n  const singleFieldInput = (feedback, value) => {\n    const formData = [...feedbackFormData];\n    const index = formData.findIndex(element => element.feedbackId === feedback.id);\n\n    if (index !== -1) {\n      formData[index].answer = value;\n    } else {\n      const data = {\n        feedbackId: feedback.id,\n        answer: value\n      };\n      formData.push(data);\n    }\n\n    setFeedbackFormData(formData);\n  };\n\n  const saveFeedbackResponse = e => {\n    e.preventDefault();\n    setLoader(true);\n    Axios.post(\"https://stadtstrandapi.ecrapps.website/api/v1/feedback/report\", {\n      clientId: clientId,\n      brandPageId: brandPageId,\n      clientFeedBacks: feedbackFormData,\n      description: description,\n      rating: rating\n    }).then(response => {\n      setLoader(false);\n      setAlertError(false);\n      setAlertSuccess(true);\n      setSuccessMessage(\"Feedback submitted successfully.\");\n      setInterval(redirect(brandPageId), 6000);\n    }).catch(e => {\n      console.log(e.response);\n      setLoader(false);\n      setAlertError(true);\n      setErrorMessage(e.response.data.message);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(UserNavbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MDBContainer, {\n      fluid: true,\n      style: {\n        height: \"100vh\",\n        background: \"#b5cdd9\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-10 offset-1 col-md-5 offset-md-3 mt-3 mb-5\",\n          id: UserStyles.listCard,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-2 text-left\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: history.goBack,\n                className: \"black-text\",\n                children: /*#__PURE__*/_jsxDEV(MDBIcon, {\n                  className: \"mt-2\",\n                  style: {\n                    fontSize: \"25px\",\n                    color: \"#000000\"\n                  },\n                  icon: \"chevron-circle-left\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-10 text-left mt-1\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Give Feedback\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: alertError ? /*#__PURE__*/_jsxDEV(MDBAlert, {\n                color: \"danger\",\n                children: errorMessage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 19\n              }, this) : alertSuccess ? /*#__PURE__*/_jsxDEV(MDBAlert, {\n                color: \"info\",\n                children: successMessage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-10 offset-1 mt-3 font-small text-left \",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: \"12px\",\n                  fontWeight: \"500\",\n                  color: \"#c2c2c2\"\n                },\n                className: \"mt-4\",\n                children: \"Rate us on how you feel about our service\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 mt-2 mb-2 text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"spinner-grow text-primary fast ml-2\",\n              role: \"status\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"sr-only mt-2\",\n                children: \"Loading...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 15\n          }, this) : feedbackQuestions.length < 1 ? /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"No Feed back questions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: saveFeedbackResponse,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-10 offset-1 mt-3 font-small text-left \",\n                  children: feedbackQuestions.map(feedback => {\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mt-2\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        style: {\n                          fontSize: \"14px\"\n                        },\n                        children: [feedback.question, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 182,\n                          columnNumber: 51\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"text\",\n                            className: \"form-control text-left\",\n                            onChange: e => singleFieldInput(feedback, e.target.value),\n                            style: imageFileStyle\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 184,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 183,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 181,\n                        columnNumber: 29\n                      }, this)\n                    }, feedback.id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 180,\n                      columnNumber: 27\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-10 offset-1 mt-3 font-small text-left \",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-2\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        fontSize: \"14px\"\n                      },\n                      children: [\"Please rate our Strand \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 204,\n                        columnNumber: 50\n                      }, this), /*#__PURE__*/_jsxDEV(ReactStars, {\n                        count: 5,\n                        onChange: ratingChanged,\n                        size: 16,\n                        activeColor: \"#ffd700\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 205,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 203,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-10 offset-1 mt-3 text-left\",\n                  children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    className: \"form-control text-left\",\n                    style: imageFileStyle,\n                    defaultValue: \"Care to share any personal feedback?\",\n                    onChange: e => {\n                      setDescription(e.target.value);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 218,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-12 text-center\",\n                  children: /*#__PURE__*/_jsxDEV(MDBBtn, {\n                    type: \"submit\",\n                    color: \"blue\",\n                    style: {\n                      borderRadius: \"20px\"\n                    },\n                    className: \"waves-effect z-depth-1a\",\n                    size: \"md\",\n                    children: [\"Send\", loader ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"spinner-grow spinner-grow-sm ml-3\",\n                      role: \"status\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"sr-only\",\n                        children: \"Loading...\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 243,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 239,\n                      columnNumber: 27\n                    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 246,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 230,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mt-3\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 text-center\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"black-text\",\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  to: {\n                    pathname: `/user/form/${brandPageId}`\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(MDBIcon, {\n                    className: \"mt-2\",\n                    style: {\n                      fontSize: \"15px\",\n                      color: \"#000000\"\n                    },\n                    icon: \"chevron-circle-left\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-1\",\n                    style: {\n                      fontSize: \"15px\",\n                      color: \"#000000\"\n                    },\n                    children: \"Back to Menu Icons\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 268,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n}\n\n_s(BrandPageFeedback, \"fmcv1Jeh9Bqa5y16Mk7AXPsurdU=\", false, function () {\n  return [useHistory];\n});\n\n_c = BrandPageFeedback;\n\nvar _c;\n\n$RefreshReg$(_c, \"BrandPageFeedback\");","map":{"version":3,"sources":["/Users/sph/Downloads/StadStrandReactFrontEnd/src/AppContainer/User/BrandPageFeedback.js"],"names":["React","useState","useEffect","UserNavbar","MDBContainer","MDBIcon","MDBBtn","MDBAlert","Link","useHistory","UserStyles","Axios","ReactStars","BrandPageFeedback","props","brandPageId","match","params","brandpageid","history","clientId","localStorage","getItem","feedbackQuestions","setFeedbackQuestion","feedbackFormData","setFeedbackFormData","loading","setLoading","loader","setLoader","rating","setRating","description","setDescription","alertError","setAlertError","errorMessage","setErrorMessage","alertSuccess","setAlertSuccess","successMessage","setSuccessMessage","imageFileStyle","padding","border","marginLeft","width","borderRadius","textAlign","fontSize","redirect","window","location","ratingChanged","newRating","get","then","response","data","Feedbacks","catch","e","singleFieldInput","feedback","value","formData","index","findIndex","element","feedbackId","id","answer","push","saveFeedbackResponse","preventDefault","post","clientFeedBacks","setInterval","console","log","message","height","background","listCard","goBack","color","fontWeight","length","map","question","target","pathname"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport UserNavbar from \"../../AppComponents/UserComp/UserNavbar\";\nimport { MDBContainer, MDBIcon, MDBBtn, MDBAlert } from \"mdbreact\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport UserStyles from \"../../AppStyles/UserStyles.module.css\";\nimport Axios from \"axios\";\nimport ReactStars from \"react-rating-stars-component\";\n\nexport default function BrandPageFeedback(props) {\n  const brandPageId = props.match.params.brandpageid;\n\n  const history = useHistory();\n\n  const clientId = localStorage.getItem(\"clientId\");\n  const [feedbackQuestions, setFeedbackQuestion] = useState([]);\n  const [feedbackFormData, setFeedbackFormData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [loader, setLoader] = useState(false);\n  const [rating, setRating] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [alertError, setAlertError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [alertSuccess, setAlertSuccess] = useState(false);\n  const [successMessage, setSuccessMessage] = useState(\"\");\n\n  const imageFileStyle = {\n    padding: \"10px\",\n    border: \"1px dotted #CCCCCC\",\n    marginLeft: \"12px\",\n    width: \"90%\",\n    borderRadius: \"10px\",\n    textAlign: \"center\",\n    fontSize: \"12px\",\n  };\n\n  const redirect = (brandPageId) => {\n    window.location = `/user/form/${brandPageId}`;\n  };\n\n  const ratingChanged = (newRating) => {\n    if (newRating === 1) {\n      setRating(\"Very Bad\");\n    } else if (newRating === 2) {\n      setRating(\"Poor\");\n    } else if (newRating === 3) {\n      setRating(\"Ok\");\n    } else if (newRating === 4) {\n      setRating(\"Good\");\n    } else {\n      setRating(\"Excellent\");\n    }\n  };\n\n  useEffect(() => {\n    Axios.get(\n      `https://stadtstrandapi.ecrapps.website/api/v1/brandpagefeedback/${brandPageId}`\n    )\n      .then((response) => {\n        setFeedbackQuestion(response.data.data.Feedbacks);\n        setLoading(false);\n      })\n      .catch((e) => {});\n  }, [brandPageId]);\n\n  const singleFieldInput = (feedback, value) => {\n    const formData = [...feedbackFormData];\n    const index = formData.findIndex(\n      (element) => element.feedbackId === feedback.id\n    );\n    if (index !== -1) {\n      formData[index].answer = value;\n    } else {\n      const data = {\n        feedbackId: feedback.id,\n        answer: value,\n      };\n      formData.push(data);\n    }\n    setFeedbackFormData(formData);\n  };\n\n  const saveFeedbackResponse = (e) => {\n    e.preventDefault();\n    setLoader(true);\n\n    Axios.post(\n      \"https://stadtstrandapi.ecrapps.website/api/v1/feedback/report\",\n      {\n        clientId: clientId,\n        brandPageId: brandPageId,\n        clientFeedBacks: feedbackFormData,\n        description: description,\n        rating: rating,\n      }\n    )\n      .then((response) => {\n        setLoader(false);\n        setAlertError(false);\n        setAlertSuccess(true);\n        setSuccessMessage(\"Feedback submitted successfully.\");\n        setInterval(redirect(brandPageId), 6000);\n      })\n      .catch((e) => {\n        console.log(e.response);\n        setLoader(false);\n        setAlertError(true);\n        setErrorMessage(e.response.data.message);\n      });\n  };\n\n  return (\n    <React.Fragment>\n      <UserNavbar />\n      <MDBContainer fluid style={{ height: \"100vh\", background: \"#b5cdd9\" }}>\n        <div className=\"row\">\n          <div\n            className=\"col-10 offset-1 col-md-5 offset-md-3 mt-3 mb-5\"\n            id={UserStyles.listCard}\n          >\n            <div className=\"row mt-3\">\n              <div className=\"col-2 text-left\">\n                <div onClick={history.goBack} className=\"black-text\">\n                  <MDBIcon\n                    className=\"mt-2\"\n                    style={{ fontSize: \"25px\", color: \"#000000\" }}\n                    icon=\"chevron-circle-left\"\n                  />\n                </div>\n              </div>\n              <div className=\"col-10 text-left mt-1\">\n                <h3>\n                  <b>Give Feedback</b>\n                </h3>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"col-12\">\n                {alertError ? (\n                  <MDBAlert color=\"danger\">{errorMessage}</MDBAlert>\n                ) : alertSuccess ? (\n                  <MDBAlert color=\"info\">{successMessage}</MDBAlert>\n                ) : (\n                  <div></div>\n                )}\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col-10 offset-1 mt-3 font-small text-left \">\n                <span\n                  style={{\n                    fontSize: \"12px\",\n                    fontWeight: \"500\",\n                    color: \"#c2c2c2\",\n                  }}\n                  className=\"mt-4\"\n                >\n                  Rate us on how you feel about our service\n                </span>\n              </div>\n            </div>\n            {loading ? (\n              <div className=\"col-12 mt-2 mb-2 text-center\">\n                <div\n                  className=\"spinner-grow text-primary fast ml-2\"\n                  role=\"status\"\n                >\n                  <span className=\"sr-only mt-2\">Loading...</span>\n                </div>\n              </div>\n            ) : feedbackQuestions.length < 1 ? (\n              <h4>No Feed back questions</h4>\n            ) : (\n              <div>\n                <form onSubmit={saveFeedbackResponse}>\n                  <div className=\"row\">\n                    <div className=\"col-10 offset-1 mt-3 font-small text-left \">\n                      {feedbackQuestions.map((feedback) => {\n                        return (\n                          <div className=\"mt-2\" key={feedback.id}>\n                            <span style={{ fontSize: \"14px\" }}>\n                              {feedback.question} <br />\n                              <span>\n                                <input\n                                  type=\"text\"\n                                  className=\"form-control text-left\"\n                                  onChange={(e) =>\n                                    singleFieldInput(feedback, e.target.value)\n                                  }\n                                  style={imageFileStyle}\n                                />\n                              </span>\n                            </span>\n                          </div>\n                        );\n                      })}\n                    </div>\n                  </div>\n\n                  <div className=\"row\">\n                    <div className=\"col-10 offset-1 mt-3 font-small text-left \">\n                      <div className=\"mt-2\">\n                        <span style={{ fontSize: \"14px\" }}>\n                          Please rate our Strand <br />\n                          <ReactStars\n                            count={5}\n                            onChange={ratingChanged}\n                            size={16}\n                            activeColor=\"#ffd700\"\n                          />\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"row\">\n                    <div className=\"col-10 offset-1 mt-3 text-left\">\n                      <textarea\n                        className=\"form-control text-left\"\n                        style={imageFileStyle}\n                        defaultValue=\"Care to share any personal feedback?\"\n                        onChange={(e) => {\n                          setDescription(e.target.value);\n                        }}\n                      ></textarea>\n                    </div>\n                  </div>\n                  <div className=\"row\">\n                    <div className=\"col-12 text-center\">\n                      <MDBBtn\n                        type=\"submit\"\n                        color=\"blue\"\n                        style={{ borderRadius: \"20px\" }}\n                        className=\"waves-effect z-depth-1a\"\n                        size=\"md\"\n                      >\n                        Send\n                        {loader ? (\n                          <div\n                            className=\"spinner-grow spinner-grow-sm ml-3\"\n                            role=\"status\"\n                          >\n                            <span className=\"sr-only\">Loading...</span>\n                          </div>\n                        ) : (\n                          <span></span>\n                        )}\n                      </MDBBtn>\n                    </div>\n                  </div>\n                </form>\n              </div>\n            )}\n\n            <div className=\"row mt-3\">\n              <div className=\"col-12 text-center\">\n                <div className=\"black-text\">\n                  <Link\n                    to={{\n                      pathname: `/user/form/${brandPageId}`,\n                    }}\n                  >\n                    <MDBIcon\n                      className=\"mt-2\"\n                      style={{ fontSize: \"15px\", color: \"#000000\" }}\n                      icon=\"chevron-circle-left\"\n                    />\n                    <span\n                      className=\"ml-1\"\n                      style={{ fontSize: \"15px\", color: \"#000000\" }}\n                    >\n                      Back to Menu Icons\n                    </span>\n                  </Link>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </MDBContainer>\n    </React.Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}