{"ast":null,"code":"var _jsxFileName = \"/Users/sph/Downloads/StadStrandReactFrontEnd/src/AppComponents/UserComp/UserFormManagerDetails.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { MDBModal, MDBModalBody, MDBIcon, MDBInput, MDBBtn } from \"mdbreact\";\nimport Axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UserFormManagerDetails = props => {\n  _s();\n\n  const brandPageDetails = props.pageDetails;\n  const brandPageId = brandPageDetails.id;\n  const brandPageFormId = brandPageDetails.BrandPageForm.id;\n  const [userFormModal, setUserFormModal] = useState(true);\n  const [radio, setRadio] = useState(false);\n  const [brandPageFormFields, setBrandPageFormFields] = useState();\n  const [formItems, setFormItems] = useState([]);\n  const [loader, setLoader] = useState(false);\n  const [showButton, setShowButton] = useState(false);\n  useEffect(() => {\n    Axios.get(`https://stadtstrandapi.ecrapps.website/api/v1/brandpageform/${brandPageFormId}`).then(response => {\n      setBrandPageFormFields(response.data.data.FormItems); /////Check Form Time Status///////\n\n      const currentDate = new Date();\n      const saveDate = localStorage.getItem(\"saveDate\");\n      const fourHoursAgo = currentDate.getHours() - saveDate.getHours();\n      console.log(fourHoursAgo);\n\n      if (fourHoursAgo < 4) {\n        localStorage.setItem(\"formStatus\", false);\n      }\n    }).catch(e => {\n      console.log(e.response);\n    });\n  }, [brandPageFormId]);\n\n  const toggleRadio = () => {\n    setRadio(!radio);\n    setShowButton(!showButton);\n  };\n\n  const toggleForm = () => {\n    setUserFormModal(!userFormModal);\n  };\n\n  const formInputStyle = {\n    borderRadius: \"20px\",\n    border: \"1px dotted #000000\",\n    fontSize: \"12px\"\n  };\n  const [modalSuccess, setModalSuccess] = useState(false);\n\n  const changefield = (field, e) => {\n    const fields = [...formItems];\n    const index = fields.findIndex(element => element.title === field.title);\n\n    if (index === -1) {\n      fields.push({\n        title: e.target.placeholder,\n        value: e.target.value\n      });\n    } else {\n      fields[index].title = e.target.placeholder;\n      fields[index].value = e.target.value;\n    }\n\n    setFormItems(fields);\n  };\n\n  const registerClientSession = () => {\n    const formStatus = true;\n    const saveDate = new Date();\n    localStorage.setItem(\"saveDate\", saveDate);\n    localStorage.setItem(\"formStatus\", formStatus);\n  };\n\n  const redirect = () => {\n    setUserFormModal(false);\n  };\n\n  const saveForm = e => {\n    e.preventDefault();\n    setLoader(!loader);\n    Axios.post(\"https://stadtstrandapi.ecrapps.website/api/v1/client\", {\n      brandPageId: brandPageId,\n      formItems: formItems\n    }).then(response => {\n      localStorage.setItem(\"clientId\", response.data.data.id);\n      localStorage.setItem(\"brandPageId\", brandPageId);\n      setLoader(false);\n      setModalSuccess(true);\n      registerClientSession();\n    }).catch(e => {\n      setLoader(false); // setAlertError(true);\n      // setErrorMessage(e.response.data.data);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(MDBModal, {\n    isOpen: userFormModal,\n    toggle: toggleForm,\n    size: \"sm\",\n    backdrop: false,\n    children: /*#__PURE__*/_jsxDEV(MDBModalBody, {\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(MDBIcon, {\n          icon: \"map-marker-alt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), \" \", brandPageDetails.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), modalSuccess ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(MDBIcon, {\n            far: true,\n            icon: \"check-circle\",\n            style: {\n              fontSize: \"40px\",\n              color: \"green\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontWeight: \"400\"\n          },\n          children: \"Form submitted successfully\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n          type: \"button\",\n          color: \"#39729b\",\n          style: {\n            borderRadius: \"20px\",\n            backgroundColor: \"#39729b\",\n            color: \"#ffffff\"\n          },\n          className: \"waves-effect z-depth-1a\",\n          size: \"md\",\n          onClick: redirect,\n          children: \"Continue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this) : brandPageFormFields ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: saveForm,\n          children: [brandPageFormFields.map(field => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12 col-md-12\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: field.formType,\n                  className: \"form-control\",\n                  placeholder: field.title,\n                  style: formInputStyle,\n                  required: field.required,\n                  onChange: e => changefield(field, e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 21\n              }, this)\n            }, field.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 19\n            }, this);\n          }), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group row mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-2 col-md-2\",\n              children: /*#__PURE__*/_jsxDEV(MDBInput, {\n                onClick: toggleRadio,\n                checked: radio,\n                type: \"radio\",\n                id: \"radio2\",\n                style: {\n                  fontSize: \"8px\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-9 col-md-9\",\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  fontSize: \"11px\"\n                },\n                children: \"By submitting this form, i agree to receive newsletters & updates from stadstrand\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group row text-center mt-3 mb-3\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: showButton ? /*#__PURE__*/_jsxDEV(MDBBtn, {\n                type: \"submit\",\n                color: \"#39729b\",\n                style: {\n                  borderRadius: \"20px\",\n                  backgroundColor: \"#39729b\",\n                  color: \"#ffffff\"\n                },\n                className: \"waves-effect z-depth-1a\",\n                size: \"md\",\n                children: [\"FINISH\", loader ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spinner-grow spinner-grow-sm ml-3\",\n                  role: \"status\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"sr-only\",\n                    children: \"Loading...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row mt-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner-grow text-primary\",\n            role: \"status\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sr-only\",\n              children: \"Loading...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Loading brand page form..\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UserFormManagerDetails, \"gpzH6mNlgjAXmy6Ybz0TPTH7+ro=\");\n\n_c = UserFormManagerDetails;\nexport default UserFormManagerDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserFormManagerDetails\");","map":{"version":3,"sources":["/Users/sph/Downloads/StadStrandReactFrontEnd/src/AppComponents/UserComp/UserFormManagerDetails.js"],"names":["React","useState","useEffect","MDBModal","MDBModalBody","MDBIcon","MDBInput","MDBBtn","Axios","UserFormManagerDetails","props","brandPageDetails","pageDetails","brandPageId","id","brandPageFormId","BrandPageForm","userFormModal","setUserFormModal","radio","setRadio","brandPageFormFields","setBrandPageFormFields","formItems","setFormItems","loader","setLoader","showButton","setShowButton","get","then","response","data","FormItems","currentDate","Date","saveDate","localStorage","getItem","fourHoursAgo","getHours","console","log","setItem","catch","e","toggleRadio","toggleForm","formInputStyle","borderRadius","border","fontSize","modalSuccess","setModalSuccess","changefield","field","fields","index","findIndex","element","title","push","target","placeholder","value","registerClientSession","formStatus","redirect","saveForm","preventDefault","post","name","color","fontWeight","backgroundColor","map","formType","required"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,QAAT,EAAmBC,YAAnB,EAAiCC,OAAjC,EAA0CC,QAA1C,EAAoDC,MAApD,QAAkE,UAAlE;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAEA,MAAMC,sBAAsB,GAAIC,KAAD,IAAW;AAAA;;AACxC,QAAMC,gBAAgB,GAAGD,KAAK,CAACE,WAA/B;AACA,QAAMC,WAAW,GAAGF,gBAAgB,CAACG,EAArC;AACA,QAAMC,eAAe,GAAGJ,gBAAgB,CAACK,aAAjB,CAA+BF,EAAvD;AACA,QAAM,CAACG,aAAD,EAAgBC,gBAAhB,IAAoCjB,QAAQ,CAAC,IAAD,CAAlD;AACA,QAAM,CAACkB,KAAD,EAAQC,QAAR,IAAoBnB,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACoB,mBAAD,EAAsBC,sBAAtB,IAAgDrB,QAAQ,EAA9D;AACA,QAAM,CAACsB,SAAD,EAAYC,YAAZ,IAA4BvB,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACwB,MAAD,EAASC,SAAT,IAAsBzB,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAAC0B,UAAD,EAAaC,aAAb,IAA8B3B,QAAQ,CAAC,KAAD,CAA5C;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACdM,IAAAA,KAAK,CAACqB,GAAN,CACG,+DAA8Dd,eAAgB,EADjF,EAGGe,IAHH,CAGSC,QAAD,IAAc;AAClBT,MAAAA,sBAAsB,CAACS,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBC,SAApB,CAAtB,CADkB,CAElB;;AACA,YAAMC,WAAW,GAAG,IAAIC,IAAJ,EAApB;AACA,YAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAjB;AACA,YAAMC,YAAY,GAAGL,WAAW,CAACM,QAAZ,KAAyBJ,QAAQ,CAACI,QAAT,EAA9C;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYH,YAAZ;;AACA,UAAIA,YAAY,GAAG,CAAnB,EAAsB;AACpBF,QAAAA,YAAY,CAACM,OAAb,CAAqB,YAArB,EAAmC,KAAnC;AACD;AACF,KAbH,EAcGC,KAdH,CAcUC,CAAD,IAAO;AACZJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,CAAC,CAACd,QAAd;AACD,KAhBH;AAiBD,GAlBQ,EAkBN,CAAChB,eAAD,CAlBM,CAAT;;AAoBA,QAAM+B,WAAW,GAAG,MAAM;AACxB1B,IAAAA,QAAQ,CAAC,CAACD,KAAF,CAAR;AACAS,IAAAA,aAAa,CAAC,CAACD,UAAF,CAAb;AACD,GAHD;;AAKA,QAAMoB,UAAU,GAAG,MAAM;AACvB7B,IAAAA,gBAAgB,CAAC,CAACD,aAAF,CAAhB;AACD,GAFD;;AAIA,QAAM+B,cAAc,GAAG;AACrBC,IAAAA,YAAY,EAAE,MADO;AAErBC,IAAAA,MAAM,EAAE,oBAFa;AAGrBC,IAAAA,QAAQ,EAAE;AAHW,GAAvB;AAMA,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCpD,QAAQ,CAAC,KAAD,CAAhD;;AAEA,QAAMqD,WAAW,GAAG,CAACC,KAAD,EAAQV,CAAR,KAAc;AAChC,UAAMW,MAAM,GAAG,CAAC,GAAGjC,SAAJ,CAAf;AACA,UAAMkC,KAAK,GAAGD,MAAM,CAACE,SAAP,CAAkBC,OAAD,IAAaA,OAAO,CAACC,KAAR,KAAkBL,KAAK,CAACK,KAAtD,CAAd;;AACA,QAAIH,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChBD,MAAAA,MAAM,CAACK,IAAP,CAAY;AACVD,QAAAA,KAAK,EAAEf,CAAC,CAACiB,MAAF,CAASC,WADN;AAEVC,QAAAA,KAAK,EAAEnB,CAAC,CAACiB,MAAF,CAASE;AAFN,OAAZ;AAID,KALD,MAKO;AACLR,MAAAA,MAAM,CAACC,KAAD,CAAN,CAAcG,KAAd,GAAsBf,CAAC,CAACiB,MAAF,CAASC,WAA/B;AACAP,MAAAA,MAAM,CAACC,KAAD,CAAN,CAAcO,KAAd,GAAsBnB,CAAC,CAACiB,MAAF,CAASE,KAA/B;AACD;;AAEDxC,IAAAA,YAAY,CAACgC,MAAD,CAAZ;AACD,GAdD;;AAgBA,QAAMS,qBAAqB,GAAG,MAAM;AAClC,UAAMC,UAAU,GAAG,IAAnB;AACA,UAAM9B,QAAQ,GAAG,IAAID,IAAJ,EAAjB;AAEAE,IAAAA,YAAY,CAACM,OAAb,CAAqB,UAArB,EAAiCP,QAAjC;AACAC,IAAAA,YAAY,CAACM,OAAb,CAAqB,YAArB,EAAmCuB,UAAnC;AACD,GAND;;AAQA,QAAMC,QAAQ,GAAG,MAAM;AACrBjD,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,GAFD;;AAIA,QAAMkD,QAAQ,GAAIvB,CAAD,IAAO;AACtBA,IAAAA,CAAC,CAACwB,cAAF;AACA3C,IAAAA,SAAS,CAAC,CAACD,MAAF,CAAT;AAEAjB,IAAAA,KAAK,CAAC8D,IAAN,CAAW,sDAAX,EAAmE;AACjEzD,MAAAA,WAAW,EAAEA,WADoD;AAEjEU,MAAAA,SAAS,EAAEA;AAFsD,KAAnE,EAIGO,IAJH,CAISC,QAAD,IAAc;AAClBM,MAAAA,YAAY,CAACM,OAAb,CAAqB,UAArB,EAAiCZ,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBlB,EAApD;AACAuB,MAAAA,YAAY,CAACM,OAAb,CAAqB,aAArB,EAAoC9B,WAApC;AACAa,MAAAA,SAAS,CAAC,KAAD,CAAT;AACA2B,MAAAA,eAAe,CAAC,IAAD,CAAf;AACAY,MAAAA,qBAAqB;AACtB,KAVH,EAWGrB,KAXH,CAWUC,CAAD,IAAO;AACZnB,MAAAA,SAAS,CAAC,KAAD,CAAT,CADY,CAEZ;AACA;AACD,KAfH;AAgBD,GApBD;;AAsBA,sBACE,QAAC,QAAD;AACE,IAAA,MAAM,EAAET,aADV;AAEE,IAAA,MAAM,EAAE8B,UAFV;AAGE,IAAA,IAAI,EAAC,IAHP;AAIE,IAAA,QAAQ,EAAE,KAJZ;AAAA,2BAME,QAAC,YAAD;AAAA,8BACE;AAAI,QAAA,SAAS,EAAC,aAAd;AAAA,gCACE,QAAC,OAAD;AAAS,UAAA,IAAI,EAAC;AAAd;AAAA;AAAA;AAAA;AAAA,gBADF,OACqCpC,gBAAgB,CAAC4D,IADtD;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAIE;AAAA;AAAA;AAAA;AAAA,cAJF,EAKGnB,YAAY,gBACX;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA,gCACE;AAAA,iCACE,QAAC,OAAD;AACE,YAAA,GAAG,MADL;AAEE,YAAA,IAAI,EAAC,cAFP;AAGE,YAAA,KAAK,EAAE;AAAED,cAAAA,QAAQ,EAAE,MAAZ;AAAoBqB,cAAAA,KAAK,EAAE;AAA3B;AAHT;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAQE;AAAG,UAAA,KAAK,EAAE;AAAEC,YAAAA,UAAU,EAAE;AAAd,WAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARF,eASE,QAAC,MAAD;AACE,UAAA,IAAI,EAAC,QADP;AAEE,UAAA,KAAK,EAAC,SAFR;AAGE,UAAA,KAAK,EAAE;AACLxB,YAAAA,YAAY,EAAE,MADT;AAELyB,YAAAA,eAAe,EAAE,SAFZ;AAGLF,YAAAA,KAAK,EAAE;AAHF,WAHT;AAQE,UAAA,SAAS,EAAC,yBARZ;AASE,UAAA,IAAI,EAAC,IATP;AAUE,UAAA,OAAO,EAAEL,QAVX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBATF;AAAA;AAAA;AAAA;AAAA;AAAA,cADW,GAyBT9C,mBAAmB,gBACrB;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,+BACE;AAAM,UAAA,QAAQ,EAAE+C,QAAhB;AAAA,qBACG/C,mBAAmB,CAACsD,GAApB,CAAyBpB,KAAD,IAAW;AAClC,gCACE;AAAK,cAAA,SAAS,EAAC,gBAAf;AAAA,qCACE;AAAK,gBAAA,SAAS,EAAC,kBAAf;AAAA,uCACE;AACE,kBAAA,IAAI,EAAEA,KAAK,CAACqB,QADd;AAEE,kBAAA,SAAS,EAAC,cAFZ;AAGE,kBAAA,WAAW,EAAErB,KAAK,CAACK,KAHrB;AAIE,kBAAA,KAAK,EAAEZ,cAJT;AAKE,kBAAA,QAAQ,EAAEO,KAAK,CAACsB,QALlB;AAME,kBAAA,QAAQ,EAAGhC,CAAD,IAAOS,WAAW,CAACC,KAAD,EAAQV,CAAR;AAN9B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF,eAAqCU,KAAK,CAACzC,EAA3C;AAAA;AAAA;AAAA;AAAA,oBADF;AAcD,WAfA,CADH,eAkBE;AAAK,YAAA,SAAS,EAAC,qBAAf;AAAA,oCACE;AAAK,cAAA,SAAS,EAAC,gBAAf;AAAA,qCACE,QAAC,QAAD;AACE,gBAAA,OAAO,EAAEgC,WADX;AAEE,gBAAA,OAAO,EAAE3B,KAFX;AAGE,gBAAA,IAAI,EAAC,OAHP;AAIE,gBAAA,EAAE,EAAC,QAJL;AAKE,gBAAA,KAAK,EAAE;AAAEgC,kBAAAA,QAAQ,EAAE;AAAZ;AALT;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,eAUE;AAAK,cAAA,SAAS,EAAC,gBAAf;AAAA,qCACE;AAAO,gBAAA,KAAK,EAAE;AAAEA,kBAAAA,QAAQ,EAAE;AAAZ,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAlBF,eAoCE;AAAK,YAAA,SAAS,EAAC,sCAAf;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,QAAf;AAAA,wBACGxB,UAAU,gBACT,QAAC,MAAD;AACE,gBAAA,IAAI,EAAC,QADP;AAEE,gBAAA,KAAK,EAAC,SAFR;AAGE,gBAAA,KAAK,EAAE;AACLsB,kBAAAA,YAAY,EAAE,MADT;AAELyB,kBAAAA,eAAe,EAAE,SAFZ;AAGLF,kBAAAA,KAAK,EAAE;AAHF,iBAHT;AAQE,gBAAA,SAAS,EAAC,yBARZ;AASE,gBAAA,IAAI,EAAC,IATP;AAAA,qCAYG/C,MAAM,gBACL;AACE,kBAAA,SAAS,EAAC,mCADZ;AAEE,kBAAA,IAAI,EAAC,QAFP;AAAA,yCAIE;AAAM,oBAAA,SAAS,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA,wBADK,gBAQL;AAAA;AAAA;AAAA;AAAA,wBApBJ;AAAA;AAAA;AAAA;AAAA;AAAA,sBADS,gBAyBT;AAAA;AAAA;AAAA;AAAA;AA1BJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBApCF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADqB,gBAwErB;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,2BAAf;AAA2C,YAAA,IAAI,EAAC,QAAhD;AAAA,mCACE;AAAM,cAAA,SAAS,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAtGJ;AAAA;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,UADF;AAyHD,CA3ND;;GAAMhB,sB;;KAAAA,sB;AA6NN,eAAeA,sBAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { MDBModal, MDBModalBody, MDBIcon, MDBInput, MDBBtn } from \"mdbreact\";\nimport Axios from \"axios\";\n\nconst UserFormManagerDetails = (props) => {\n  const brandPageDetails = props.pageDetails;\n  const brandPageId = brandPageDetails.id;\n  const brandPageFormId = brandPageDetails.BrandPageForm.id;\n  const [userFormModal, setUserFormModal] = useState(true);\n  const [radio, setRadio] = useState(false);\n  const [brandPageFormFields, setBrandPageFormFields] = useState();\n  const [formItems, setFormItems] = useState([]);\n  const [loader, setLoader] = useState(false);\n  const [showButton, setShowButton] = useState(false);\n\n  useEffect(() => {\n    Axios.get(\n      `https://stadtstrandapi.ecrapps.website/api/v1/brandpageform/${brandPageFormId}`\n    )\n      .then((response) => {\n        setBrandPageFormFields(response.data.data.FormItems);\n        /////Check Form Time Status///////\n        const currentDate = new Date();\n        const saveDate = localStorage.getItem(\"saveDate\");\n        const fourHoursAgo = currentDate.getHours() - saveDate.getHours();\n        console.log(fourHoursAgo);\n        if (fourHoursAgo < 4) {\n          localStorage.setItem(\"formStatus\", false);\n        }\n      })\n      .catch((e) => {\n        console.log(e.response);\n      });\n  }, [brandPageFormId]);\n\n  const toggleRadio = () => {\n    setRadio(!radio);\n    setShowButton(!showButton);\n  };\n\n  const toggleForm = () => {\n    setUserFormModal(!userFormModal);\n  };\n\n  const formInputStyle = {\n    borderRadius: \"20px\",\n    border: \"1px dotted #000000\",\n    fontSize: \"12px\",\n  };\n\n  const [modalSuccess, setModalSuccess] = useState(false);\n\n  const changefield = (field, e) => {\n    const fields = [...formItems];\n    const index = fields.findIndex((element) => element.title === field.title);\n    if (index === -1) {\n      fields.push({\n        title: e.target.placeholder,\n        value: e.target.value,\n      });\n    } else {\n      fields[index].title = e.target.placeholder;\n      fields[index].value = e.target.value;\n    }\n\n    setFormItems(fields);\n  };\n\n  const registerClientSession = () => {\n    const formStatus = true;\n    const saveDate = new Date();\n\n    localStorage.setItem(\"saveDate\", saveDate);\n    localStorage.setItem(\"formStatus\", formStatus);\n  };\n\n  const redirect = () => {\n    setUserFormModal(false);\n  };\n\n  const saveForm = (e) => {\n    e.preventDefault();\n    setLoader(!loader);\n\n    Axios.post(\"https://stadtstrandapi.ecrapps.website/api/v1/client\", {\n      brandPageId: brandPageId,\n      formItems: formItems,\n    })\n      .then((response) => {\n        localStorage.setItem(\"clientId\", response.data.data.id);\n        localStorage.setItem(\"brandPageId\", brandPageId);\n        setLoader(false);\n        setModalSuccess(true);\n        registerClientSession();\n      })\n      .catch((e) => {\n        setLoader(false);\n        // setAlertError(true);\n        // setErrorMessage(e.response.data.data);\n      });\n  };\n\n  return (\n    <MDBModal\n      isOpen={userFormModal}\n      toggle={toggleForm}\n      size=\"sm\"\n      backdrop={false}\n    >\n      <MDBModalBody>\n        <h5 className=\"text-center\">\n          <MDBIcon icon=\"map-marker-alt\" /> {brandPageDetails.name}\n        </h5>\n        <hr />\n        {modalSuccess ? (\n          <div className=\"text-center\">\n            <p>\n              <MDBIcon\n                far\n                icon=\"check-circle\"\n                style={{ fontSize: \"40px\", color: \"green\" }}\n              />\n            </p>\n            <p style={{ fontWeight: \"400\" }}>Form submitted successfully</p>\n            <MDBBtn\n              type=\"button\"\n              color=\"#39729b\"\n              style={{\n                borderRadius: \"20px\",\n                backgroundColor: \"#39729b\",\n                color: \"#ffffff\",\n              }}\n              className=\"waves-effect z-depth-1a\"\n              size=\"md\"\n              onClick={redirect}\n            >\n              Continue\n            </MDBBtn>\n          </div>\n        ) : brandPageFormFields ? (\n          <div className=\"mt-3\">\n            <form onSubmit={saveForm}>\n              {brandPageFormFields.map((field) => {\n                return (\n                  <div className=\"form-group row\" key={field.id}>\n                    <div className=\"col-12 col-md-12\">\n                      <input\n                        type={field.formType}\n                        className=\"form-control\"\n                        placeholder={field.title}\n                        style={formInputStyle}\n                        required={field.required}\n                        onChange={(e) => changefield(field, e)}\n                      />\n                    </div>\n                  </div>\n                );\n              })}\n\n              <div className=\"form-group row mt-4\">\n                <div className=\"col-2 col-md-2\">\n                  <MDBInput\n                    onClick={toggleRadio}\n                    checked={radio}\n                    type=\"radio\"\n                    id=\"radio2\"\n                    style={{ fontSize: \"8px\" }}\n                  />\n                </div>\n                <div className=\"col-9 col-md-9\">\n                  <label style={{ fontSize: \"11px\" }}>\n                    By submitting this form, i agree to receive newsletters &\n                    updates from stadstrand\n                  </label>\n                </div>\n              </div>\n\n              <div className=\"form-group row text-center mt-3 mb-3\">\n                <div className=\"col-12\">\n                  {showButton ? (\n                    <MDBBtn\n                      type=\"submit\"\n                      color=\"#39729b\"\n                      style={{\n                        borderRadius: \"20px\",\n                        backgroundColor: \"#39729b\",\n                        color: \"#ffffff\",\n                      }}\n                      className=\"waves-effect z-depth-1a\"\n                      size=\"md\" \n                    >\n                      FINISH\n                      {loader ? (\n                        <div\n                          className=\"spinner-grow spinner-grow-sm ml-3\"\n                          role=\"status\"\n                        >\n                          <span className=\"sr-only\">Loading...</span>\n                        </div>\n                      ) : (\n                        <span></span>\n                      )}\n                    </MDBBtn>\n                  ) : (\n                    <span></span>\n                  )}\n                </div>\n              </div>\n            </form>\n          </div>\n        ) : (\n          <div className=\"row mt-5\">\n            <div className=\"col-12 text-center\">\n              <div className=\"spinner-grow text-primary\" role=\"status\">\n                <span className=\"sr-only\">Loading...</span>\n              </div>\n              <h5>Loading brand page form..</h5>\n            </div>\n          </div>\n        )}\n      </MDBModalBody>\n    </MDBModal>\n  );\n};\n\nexport default UserFormManagerDetails;\n"]},"metadata":{},"sourceType":"module"}